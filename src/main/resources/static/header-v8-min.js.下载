/*! mtb-profile 2015-03-31 */
TB=window.TB||{},TB.Header=function(){function a(a){if(a){var b=j.get("div.menu-bd",a);if(b){if(!o){var c=document.createElement("iframe");c.src="about: blank",c.className="menu-bd",a.insertBefore(c,b),a.iframe=c}a.menulist=b,a.onmouseenter=function(){k.addClass(this.parentNode,"hover"),o||(this.iframe.style.height=parseInt(this.menulist.offsetHeight)+25+"px",this.iframe.style.width=parseInt(this.menulist.offsetWidth)+1+"px")},a.onmouseleave=function(){k.removeClass(this.parentNode,"hover")}}}}function b(){var a=document.forms.topSearch;a&&l.on(a,"submit",function(){""==a.q.value&&(a.action=location.protocol+"//list.taobao.com/browse/cat-0.htm")})}function c(a,b){var c,d=j.get("#"+a),e=d&&d.q,f=d&&d.search_type,g=d&&d.getElementsByTagName("label")[0],h=d&&d.cat,i=j.get("#J_TSearchTabs").getElementsByTagName("li"),m=i.length,n={},o=!1,p=!1,q="tsearch-tabs-active",r="tsearch-tabs-hover",s=function(a){for(var b=0;m>b;b++)k[b===a?"addClass":"removeClass"](i[b],q)},t=j.get("#J_TSearchCat"),u=null,v=j.get("#J_TSearchCatHd"),w=t&&t.getElementsByTagName("div")[0],x=w&&w.getElementsByTagName("a")||[],y=x.length,z=function(a){for(c=0;y>c;c++)if(x[c].getAttribute("data-value")===a)return x[c];return null},A=function(){k.removeClass(t,"tsearch-cat-active")},B=function(){k.addClass(t,"tsearch-cat-active")},C=function(a){for(c=0;y>c;c++)k[x[c]===a?"addClass":"removeClass"](x[c],"tsearch-cat-selected");A(),v.innerHTML=a.innerHTML,h.value=a.getAttribute("data-value")},D=function(){e.focus(),j.UA.ie&&(e.value=e.value)};if(d){if(j.get("#J_TSearchTabs"))for(var E=0,F={"\u5b9d\u8d1d":["item","\u8f93\u5165\u60a8\u60f3\u8981\u7684\u5b9d\u8d1d"],"\u6dd8\u5b9d\u5546\u57ce":["mall","\u8f93\u5165\u60a8\u60f3\u8981\u7684\u5546\u54c1"],"\u5e97\u94fa":["shop","\u8f93\u5165\u60a8\u60f3\u8981\u7684\u5e97\u94fa\u540d\u6216\u638c\u67dc\u540d"],"\u62cd\u5356":["auction","\u8f93\u5165\u60a8\u60f3\u8981\u7684\u5b9d\u8d1d"],"\u6dd8\u5427":["taoba","\u8f93\u5165\u60a8\u60f3\u8981\u641c\u7d22\u7684\u5185\u5bb9"],"\u5b9d\u8d1d\u5206\u4eab":["share","\u8f93\u5165\u60a8\u60f3\u8981\u7684\u5b9d\u8d1d"]},G={"\u5bf6\u8c9d":["item","\u8f38\u5165\u60a8\u60f3\u8981\u7684\u5bf6\u8c9d"],"\u6dd8\u5bf6\u5546\u57ce":["mall","\u8f38\u5165\u60a8\u60f3\u8981\u7684\u5546\u54c1"],"\u5e97\u92ea":["shop","\u8f38\u5165\u60a8\u60f3\u8981\u7684\u5e97\u8216\u540d\u6216\u638c\u6ac3\u540d"],"\u62cd\u8ce3":["auction","\u8f38\u5165\u60a8\u60f3\u8981\u7684\u5bf6\u8c9d"],"\u6dd8\u5427":["taoba","\u8f38\u5165\u60a8\u60f3\u8981\u641c\u7d22\u7684\u5167\u5bb9"],"\u5bf6\u8c9d\u5206\u4eab":["share","\u8f38\u5165\u60a8\u60f3\u8981\u7684\u5bf6\u8c9d"]};m>E;E++)!function(){var a=E,b=j.trim(i[a].getElementsByTagName("a")[0].innerHTML),c=F[b]||G[b];c&&(n[c[0]]={index:a,hint:c[1]},l.on(i[a],"click",function(b){b.halt(),s(a),k.removeClass(i[a],r),f.value=c[0],g.innerHTML=c[1],D()}),l.on(i[a],"mouseenter",function(b){b.halt(),k.hasClass(i[a],q)||k.addClass(i[a],r)}),l.on(i[a],"mouseleave",function(b){b.halt(),k.hasClass(i[a],q)||k.removeClass(i[a],r)}))}();l.on(e,"focus",function(){g.innerHTML="",k.addClass(g,"hidden")}),l.on(e,"blur",function(){""!==j.trim(e.value)||o||(g.innerHTML=n[f.value].hint,k.removeClass(g,"hidden"))}),l.on("#J_TSearchTabs","mousedown",function(){o=!0,p=!0,setTimeout(function(){o=!1})}),l.on("#J_TSearchCat","click",function(a){a.halt();var b=a.target;switch(!0){case k.hasClass(b.parentNode,"tsearch-cat-hd"):case k.hasClass(b,"tsearch-cat-hd"):B();break;case"div"===b.parentNode.nodeName.toLowerCase():C(b),D()}}),l.on(document,"click",A),l.on(d,"submit",function(){switch(d.search_type.value){case"item":""===e.value&&(d.action=location.protocol+"//list.taobao.com/browse/cat-0.htm");break;case"mall":d.action=location.protocol+"//list.tmall.com/search_product.htm";break;case"shop":d.action=location.protocol+"//shopsearch.taobao.com/browse/shop_search.htm";break;case"auction":d.atype.value="a";break;case"taoba":d.action=location.protocol+"//ba.taobao.com/index.htm";break;case"share":d.tracelog.value="msearch2fx",""===e.value?d.action=location.protocol+"//jianghu.taobao.com/square.htm":(d.keyword.value=e.value,d.action=location.protocol+"//fx.taobao.com/view/share_search.htm")}}),g.innerHTML="",setTimeout(function(){if(!p){f.value=b&&b.searchType?b.searchType:"item",document.domain.indexOf("shopsearch.taobao.com")>-1&&(f.value="shop");var a=n[f.value];g.innerHTML=a.hint,s(a.index)}t&&(u=z(h.value))&&C(u),""!==j.trim(e.value)&&(g.innerHTML=""),b&&b.autoFocus&&D(),d.atype.value="",d.keyword&&(d.keyword.value=""),d.tracelog&&(d.tracelog.value="")})}}function d(a){var b=j.get("#"+a);if(b){var c=b.q;if(c&&(window.TB&&TB.Suggest||j.Suggest)){var d=j.Suggest?j:TB,e=new d.Suggest(c,location.protocol+"//suggest.taobao.com/sug",{resultFormat:"\u7ea6%result%\u4e2a\u5b9d\u8d1d"}),f=b.ssid;if(f){setTimeout(function(){f.value="s5-e"},0),f.setAttribute("autocomplete","off");var g=function(){-1==f.value.indexOf("-p1")&&(f.value+="-p1")};try{e.subscribe&&e.subscribe("onItemSelect",g),e.on&&e.on("onItemSelect",g)}catch(h){}}var i=b.elements.search_type,k=function(){return i.value},l=e._needUpdate;e._needUpdate=function(){var a=k();return("item"===a||"mall"===a)&&l.call(e)}}}}function e(){var a=j.get("#J_Logout");a&&l.on(a,"click",function(b){b.halt();var c=a.href;(new Image).src="//taobao.alipay.com/user/logout.htm",setTimeout(function(){location.href=c},20)})}function f(){if(-1!==document.domain.indexOf(".taobao.net")){for(var a=document.getElementById("header"),b=a?a.getElementsByTagName("a"):[],c=0,d=b.length,e=location.hostname.split(".");e.length>3;)e.shift();for(e=e.join(".");d>c;c++)b[c].href=b[c].href.replace("taobao.com",e)}}function g(){if(0!==document.location.href.indexOf("https://")){var a=document,b=a.getElementsByTagName("head")[0],c=a.createElement("script");c.src=location.protocol+"//assets.alicdn.com/app/search/monitor.js?t=20100331.js",b.appendChild(c)}}function h(){if(!p){var a=j.unparam(location.search.substring(1));("g_config"in m&&"appId"in m.g_config&&-1!=m.g_config.appId||"tstart"in a||"tdog"in a)&&j.ready(function(){var a=n.getElementsByTagName("head")[0]||n.documentElement,b=(n.createElement("link"),n.createElement("script")),c=q.pickDomain(2),d="taobao.com"===c||-1!=location.hostname.indexOf("tmall.com"),e=d?"assets.alicdn.com":"assets.daily.taobao.net",f=location.protocol+"//"+e+"/p/header/webww-min.js?t=20110629.js";b.src=f,a.insertBefore(b,a.firstChild)})}}function i(){function a(){c.async=!0,c.src=f+"?cb="+g,(b.getElementsByTagName("head")[0]||b.documentElement).appendChild(c)}var b=document,c=b.createElement("script"),d=b.getElementById("J_Service"),e=b.getElementById("J_ServicesContainer"),f=location.protocol+"//www.taobao.com/index_inc/2010c/includes/get-services.php",g="g_header_services_results";if(d&&e){if(window[g])return;b.addEventListener?d.addEventListener("mouseover",a,!1):b.attachEvent&&d.attachEvent("onmouseenter",a),window[g]=function(f){e.innerHTML=f,e.style.height="auto",b.removeEventListener?d.removeEventListener("mouseover",a,!1):b.detachEvent&&d.detachEvent("onmouseenter",a),c=d=e=null}}}var j=KISSY,k=j.DOM,l=j.Event,m=window,n=document,o="https:"===n.location.protocol,p=6===(m.g_config||0).appId,q={getCookie:function(a){var b=document.cookie.match("(?:^|;)\\s*"+a+"=([^;]*)");return b&&b[1]?decodeURIComponent(b[1]):""},setCookie:function(a,b,c,d){var e=encodeURIComponent(b),f=c;"number"==typeof f&&(f=new Date,f.setTime(f.getTime()+864e5*c)),f instanceof Date&&(e+="; expires="+f.toUTCString()),"string"==typeof d&&""!==d&&(e+="; domain="+d),document.cookie=a+"="+e},pickDomain:function(a,b){b=b||location.hostname;var c=".",d=b.split(c),e=d.length;return e>2?(a=a||1,a>e-2&&(a=e-2),d.slice(a).join(c)):b},escapeHTML:function(a){var b=document.createElement("div"),c=document.createTextNode(a);return b.appendChild(c),b.innerHTML}};return{init:function(k){6===j.UA.ie&&j.each(j.query("#site-nav div.menu"),function(b){a(b)}),b(),h(),e(),i(),g(),f(),j.get("#J_TSearch")&&(c("J_TSearchForm",k),p||setTimeout(function l(){void 0===l.count&&(l.count=0),l.count++,window.TB&&TB.Suggest||j.Suggest?d("J_TSearchForm"):setTimeout(arguments.callee,200)},200))},writeLoginInfo:function(a){a=a||{};var b=q.getCookie("tracknick"),c=q.getCookie("_nk_")||b,d=q.getCookie("uc1"),e=j.unparam(d),f=e.cookie15&&c||q.getCookie("ck1")&&b,g=parseInt(e._msg_,10)||0,h=+new Date,i=a.memberServer||location.protocol+"//member1.taobao.com",k=a.outmemServer||location.protocol+"//outmem.taobao.com",l=a.loginServer||"//login.taobao.com",m=a.loginUrl||l+"/member/login.jhtml?f=top",o=location.href;/^http.*(\/member\/login\.jhtml)$/i.test(o)&&(o="");var p=a.redirectUrl||o;p&&(m+="&redirectURL="+encodeURIComponent(p));var r=location.protocol+"//login.taobao.com",s=a.logoutUrl||r+"/member/logout.jhtml?f=top",t=i+"/member/newbie.htm",u=k+"/message/list_private_msg.htm?t="+h,v=location.protocol+"//jianghu.taobao.com/?t="+h,w="";f?(w='hi\uff0c<a class="user-nick" href="'+v+'" target="_top">'+q.escapeHTML(unescape(c.replace(/\\u/g,"%u")))+'</a>\uff01<a id="J_Logout" href="'+s+'" target="_top">\u9000\u51fa</a><a href="'+u+'" target="_top">\u7ad9\u5185\u4fe1',g&&(w+="("+g+")"),w+="</a>"):(w='\u4eb2\uff0c\u6b22\u8fce\u6765\u6dd8\u5b9d\uff01<a href="'+m+'" target="_top">\u8bf7\u767b\u5f55</a>',w+='<a href="'+t+'" target="_top">\u514d\u8d39\u6ce8\u518c</a>'),n.write(w)}}}();