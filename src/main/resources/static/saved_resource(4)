!function(){function e(e,t,n){if("string"==typeof e){"object"==typeof t&&(n=t,t="bat"),t="bat"===e?"":t||"bat",n=n||{},n.module=n.module||"",n.type=n.type||"normal",n.msg=n.msg||"",n.version=n.version||"",N||(N=e);var o=+new Date;j[e]=o;var i=e===N?0:o-(j[t||N]||j[N]);"error"===n.type?this.pushFull([e+"_"+n.module,e,t,n.module,n.version,n.msg,Math.max(i,0),1]):this.push([e+"_"+n.module,e,t,n.module,n.version,n.msg,Math.max(i,0),0])}}function t(e,n){return n=n||"",e?t(--e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+n):n}function n(e,t,n){return e.split(t).join(n)}function o(e,t){for(var n in e)e.hasOwnProperty(n)&&t.call(e,e[n],n)}function i(){if(F)return F;var e="",t="";if(window.goldlog&&window.goldlog.spm_ab)return e=window.goldlog.spm_ab.join(".").split("/")[0],e=e.split("-")[0];e=document.getElementsByTagName("meta");for(var n=e.length;n--&&("spm-id"!==e[n].name&&"data-spm"!==e[n].name););return(e=e[n])?(e=e.content.split("/")[0],(e=e.split("-")[0])?(t=document.body&&document.body.getAttribute("data-spm"),t=t?"."+t:"",e+t):""):void 0}function a(e){var t,o,i,a=[];for(t=0,o=e.length;t<o;t++)i=e[t],"object"==typeof i?a.push(JSON.stringify(i)):null===i||i===undefined?a.push(""):a.push(i+"");for(t=a.length;t--;)a[t]=n(n(a[t],"|","\u4e28"),";","\uff1b");return a}function r(){for(var e=0,t=new Array(256),n=0;256!==n;++n){e=n;for(var o=8;o--;)e=1&e?-306674912^e>>>1:e>>>1;t[n]=e}return"undefined"!=typeof Int32Array?new Int32Array(t):t}function u(e){for(var t,n,o=-1,i=0,a=e.length;i<a;)t=e.charCodeAt(i++),t<128?o=o>>>8^B[255&(o^t)]:t<2048?(o=o>>>8^B[255&(o^(192|t>>6&31))],o=o>>>8^B[255&(o^(128|63&t))]):t>=55296&&t<57344?(t=64+(1023&t),n=1023&e.charCodeAt(i++),o=o>>>8^B[255&(o^(240|t>>8&7))],o=o>>>8^B[255&(o^(128|t>>2&63))],o=o>>>8^B[255&(o^(128|n>>6&15|(3&t)<<4))],o=o>>>8^B[255&(o^(128|63&n))]):(o=o>>>8^B[255&(o^(224|t>>12&15))],o=o>>>8^B[255&(o^(128|t>>6&63))],o=o>>>8^B[255&(o^(128|63&t))]);return-1^o}function l(){try{if(!b)return[];window.localStorage.removeItem("ctk_full_queue"),window.localStorage.removeItem("bat_full_queue"),window.localStorage.removeItem("spy_full_queue"),window.localStorage.removeItem("tes_full_queue"),window.localStorage.removeItem("dom_full_queue");var e=window.localStorage.getItem("bat");e=e?JSON.parse(e):{};var t=[];o(e,function(e,n){_-e.time>E&&t.push(n)});for(var n=t.length;n--;)delete e[t[n]];window.localStorage.setItem("bat",JSON.stringify(e))}catch(i){}}function s(e){try{if(!b)return[];var t=window.localStorage.getItem("bat");t=t?JSON.parse(t):{};return(t[S]||{})[e]||[]}catch(n){return[]}}function c(e,t){try{if(!b)return[];var n=window.localStorage.getItem("bat");n=n?JSON.parse(n):{};var o=n[S]=n[S]||{};o[e]=t,o.time=+new Date,window.localStorage.setItem("bat",JSON.stringify(n))}catch(i){}}function d(e){var t=document.createElement("script");t.src=e,t.onload=function(){this.remove()},document.getElementsByTagName("head")[0].appendChild(t)}function h(e){var t=this;this.api=e.api||"",this.chksum=e.chksum||"",this.name=e.name||"none",this.sender=e.sender||function(){},this.windowOnloaded=!1,this.queueName=e.name+"_queue",this.fullQueueName=e.name+"_full_queue",this.sendingTask=null,this.bindEvent(),this.setQueue(window[this.queueName]||[]);try{this.setFullQueue([].concat(s(this.fullQueueName)).concat(window[this.fullQueueName]||[]))}catch(n){this.setFullQueue([].concat(window[this.fullQueueName]||[]))}(this.queue.length>0||this.fullQueue.length>0)&&this.waitSendStart(),window[e.name+"Track"]=function(){t.sender.apply(t,Array.prototype.slice.call(arguments)),t.waitSendStart()},window[e.name+"TrackIme"]=function(){t.sender.apply(t,Array.prototype.slice.call(arguments)),t.sendingTask&&clearTimeout(t.sendingTask),t.sendQueue(),t.waitSendStart()}}function w(e){return e.replace(/^\s+|\s+$/g,"")}function m(e){e=e||"",e=e.split("\n").slice(1,3);for(var t=e.length;t--;)e[t]=w(e[t]).replace(/\((.*)\)/,function(e,t){return t=t.split(":"),"("+[Number(t[2])||0,Number(t[3])||0].join(":")+")"});return e.join("^")}function f(e){e=e||"";var t=e.split(",");return t.length<=2?e:[t[0],"...",t[t.length-1]].join(",")}function p(e,t,n,o,i){try{"string"==typeof e?window.batTrack("jserror","bat",{"type":"error","msg":[e,f(t),n,o,m(i&&i.stack)].join("^")}):window.batTrack("jserror","bat",{"type":"error","msg":[e.message,f(e&&e.filename),e&&e.lineno,e&&e.colno,m(e&&e.error&&e.error.stack)].join("^")})}catch(e){}}if("function"!=typeof window.batTrack){var g=window.batSamplingFile||"",v=window.batIntervalBeforeOnload||3e3,y=window.batIntervalAfterOnload||1500,k=window.batProxy||"",b=!1;try{localStorage.batLocalTest=0,"0"===localStorage.batLocalTest&&(b=!0,localStorage.removeItem("batLocalTest"))}catch(M){}var T=1700,S=window.location.host+window.location.pathname,Q=("file:"===window.location.protocol?"http:":window.location.protocol)+"//gm.mmstat.com",I=encodeURIComponent,_=+new Date,N="",j={},E=864e5,q=0,O=/(iPhone|iPad|iPod|iOS|Android)/i.test(window.navigator.userAgent),A=t(20),F="",P=[],x=null;if(l(),g){var L=g.split("/");window[L[L.length-1]]=function(e){x=e||null;for(var t=0;t<P.length;t++)P[t]();delete window[L[L.length-1]]},d(g+"?wh_callback=true")}window.setCtkSpm=window.setBatSpm=function(e){F=e},window.setCtkProxy=window.setBatProxy=function(e){k=e};var B=r();h.prototype.push=function(e){this.queue.push(e)},h.prototype.pushFull=function(e){this.fullQueue.push(e)},h.prototype.setQueue=function(e){window[this.queueName]=this.queue=e},h.prototype.setFullQueue=function(e){window[this.fullQueueName]=this.fullQueue=e,c(this.fullQueueName,e)},h.prototype.bindEvent=function(){function e(){n.windowOnloaded=!0,window.detachEvent?window.detachEvent("onload",e):window.removeEventListener("load",e,!1)}function t(){n.sendQueue()}var n=this;if(window.addEventListener){var o;window.addEventListener("onload",e,!1);var i=["blur","beforeunload","unload"];for(o=i.length;o--;)window.addEventListener(i[o],t);var a=["WV.Event.APP.Background","pause","mozvisibilitychange","msvisibilitychange","visibilitychange","webkitvisibilitychange"];for(o=a.length;o--;)document.addEventListener(a[o],t)}else window.attachEvent&&(window.attachEvent("onload",e),window.attachEvent("onbeforeunload",t))},h.prototype.sendStart=function(){var e=this;e.sendingTask||(e.sendingTask=setTimeout(function(){e.sendQueue(),e.sendingTask=null,(e.queue.length>0||e.fullQueue.length>0)&&e.waitSendStart()},e.windowOnloaded?y:v))},h.prototype.waitSendStart=function(){var e=this;g&&!x?P.push(function(){e.sendStart()}):e.sendStart()},h.prototype.sendQueue=function(){this.setQueue(this.formatQueue(this.queue)),this.setFullQueue(this.formatQueue(this.fullQueue)),this.sendNormalQueue(),this.sendFullQueue()},h.prototype.formatQueue=function(e){for(var t=[],n=0,o=e.length;n<o;n++){var i=e[n];"[object array]"===Object.prototype.toString.call(i).toLowerCase()?t.push({"length":1,"point":i}):t.push(i)}return t},h.prototype.mergeQueue=function(e){var t,n,i,a,r=[],u={};for(t=0,n=e.length;t<n;t++){a=e[t];try{i=a.point[0],u[i]=u[i]||{"point":null,"length":0},u[i].length+=a.length,Math.random()*u[i].length<=a.length&&(u[i].point=a.point)}catch(M){continue}}return o(u,function(e){r.push(e)}),r},h.prototype.sendNormalQueue=function(){var e,t=[],n=[],o=0;for(t=this.mergeQueue(this.queue),t.sort(function(){return Math.random()-.5}),e=t.length;e--;)try{var i=I(a([].concat(t[e].point.slice(1)).concat([1e3])).join("|")).length;if(o+i>T)break;if(g){var r=x&&x.normal&&x.normal[t[e].point[0]]||1;Math.random()<1/r&&(t[e].length=t[e].length*r,n.push(t[e]),o+=i)}else n.push(t[e]),o+=i}catch(M){continue}for(e=n.length;e--;)n[e]=a([].concat(n[e].point.slice(1)).concat([n[e].length*Math.round(t.length/n.length)])).join("|");this.send(n.join(";")),this.setQueue([])},h.prototype.sendFullQueue=function(){var e,t=[],n=[],o=0;for(t=this.mergeQueue(this.fullQueue),this.setFullQueue(t);t.length;)try{var i=t[0],r=I(a([].concat(i.point.slice(1)).concat([i.length])).join("|")).length;if(r>T&&t.shift(),o+r>T)break;if(g){var u=x&&x.full&&x.full[t[0].point[0]]||1;Math.random()<1/u?(t[0].length=t[0].length*u,n.push(t.shift()),o+=r):t.shift()}else n.push(t.shift()),o+=r}catch(M){t.shift();continue}for(e=n.length;e--;)n[e]=a([].concat(n[e].point.slice(1)).concat([n[e].length])).join("|");this.send(n.join(";"))},h.prototype.send=function(e){if(e){var t=i();if(t){var n=["msg="+I(e),"hash="+u(e),"spm="+t,"client="+(O?"h5":"pc"),"token="+A,"proxy="+k].join("&");if(window.goldlog&&window.goldlog.record&&"function"==typeof window.goldlog.record)window.goldlog.record(this.api,"EXP",n,this.chksum);else{var o="__CT_image_"+q++,a=window[o]=new Image;a.onload=a.onerror=function(){window[o]=null},a.src=Q+this.api+"?"+n}}}},new h({"name":"ctk","sender":e,"api":"/codetrack.1.1","chksum":"H46836965"}),new h({"name":"bat","sender":e,"api":"/codetrack.1.1","chksum":"H46836965"}),new h({"name":"spy","sender":function(e,t,n){t=t||"",n=n||!1,e&&(n?this.pushFull([e,t,+new Date-_]):this.push([e,t,+new Date-_]))},"api":"/codetrack.1.2","chksum":"H46836987"}),new h({"name":"tes","sender":function(e,t,n){t=t||[],n=n||!1,e&&(n?this.pushFull([].concat([e]).concat(t)):this.push([].concat([e]).concat(t)))},"api":"/codetrack.1.3","chksum":"H46836988"}),new h({"name":"dom","sender":function(e,t,n,o,i){t=t||"",n=n||"",o=o||"",i=i||!1;var a=[e+"_"+t+"_"+n+"_"+o,e,t,n,o];i?this.pushFull(a):this.push(a)},"api":"/codetrack.1.4","chksum":"H46836989"}),window.addEventListener?window.addEventListener("error",p,!1):window.attachEvent("error",p),window.batTrack("bat","")}}(),function(e,t){"function"==typeof define&&define.amd?define("mui/bat/index",[],function(){return e.bat=t()}):"object"==typeof module&&module.exports?module.exports=t():e.bat=t()}(window,function(){return{"domTrack":window.domTrack,"ctkTrack":window.ctkTrack,"batTrack":window.batTrack,"tesTrack":window.tesTrack,"spyTrack":window.spyTrack,"domTrackIme":window.domTrackIme,"ctkTrackIme":window.ctkTrackIme,"batTrackIme":window.batTrackIme,"tesTrackIme":window.tesTrackIme,"spyTrackIme":window.spyTrackIme,"setBatSpm":window.setBatSpm,"setBatProxy":window.setBatProxy}});function _toConsumableArray(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(){var n=window.performance&&performance.timing.navigationStart,e={"min":function(n){return Math.min.apply(Math,_toConsumableArray(n))},"max":function(n){return Math.max.apply(Math,_toConsumableArray(n))},"avg":function(n){return n.reduce(function(n,e){return n+e})/n.length},"majority":function(n){for(var e={},t=n[0],i=1,o=0;o<n.length;o++){var r=n[o];null==e[r]?e[r]=1:e[r]++,e[r]>i&&(t=r,i=e[r])}return t},"median":function(n){n=[].concat(n),n.sort();var e=Math.floor((n.length-1)/2),t=Math.ceil((n.length-1)/2);return(n[e]+n[t])/2}},t=function(n){var e=function(){setTimeout(n,10)};"complete"===document.readyState?e():window.addEventListener("load",e)},i=function(){return document.hidden!==undefined?{"hidden":"hidden","visibilityChange":"visibilitychange"}:document.msHidden!==undefined?{"hidden":"msHidden","visibilityChange":"msvisibilitychange"}:document.webkitHidden!==undefined?{"hidden":"webkitHidden","visibilityChange":"webkitvisibilitychange"}:void 0}(),o=!!i,r=o||"onpagehide"in window,a=function(n){var e=Date.now(),t=function(){var t=Date.now();t-e>10&&n(),e=t};window.addEventListener("pagehide",t),o&&document.addEventListener(i.visibilityChange,function(n){document[i.hidden]&&t()})};window.TES={},TES.send=function(n,e,t,i){if(i&&window.tesTrackIme)tesTrackIme(n+e[0],[n].concat(e),t);else{var o="tes_queue";t&&(o="tes_full_queue"),(window[o]||(window[o]=[])).push([n+e[0],n].concat(e))}},TES.record=function(n,e,t,i,o,r){this.send(e,["normal",n,t,i],o,r)},TES.monitor=function(n,e,t,i,o,r){this.send(e,["monitor",n,t,i],o,r)},TES.error=function(n,e,t,i,o,r){this.send(e,["error",n,t,i],o!==!1,r)},TES.time=function(n){this._timeRecord||(this._timeRecord={}),this._timeRecord[n]=Date.now()},TES.timeEnd=function(e){this._timeRecord[e]&&!isNaN(n)&&(this.send(e,["time",this._timeRecord[e]-n,Date.now()-this._timeRecord[e]]),delete this._timeRecord[e])},TES.timeStamp=function(e,t){isNaN(n)||this.send(e,["timeStamp",(t||Date.now())-n])},function(){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame,i=window.cancelAnimationFrame||window.webkitCancelAnimationFrame,o={},d={},u=function(){try{return performance.now()}catch(n){return Date.now()}};TES._fps=function(e,t){if(n){var i,r=function r(){var a=u();if(!i)return i=a,void(o[e]=n(r));var d=Math.round(1e3/(a-i));i=a,o[e]=n(r),t&&t(d)};o[e]=n(r)}},TES.fps=function(n){d[n]=[],this._fps(n,function(e){d[n].push(e)})},TES.fpsEnd=function(n){if(i){i(o[n]);var t=d[n];t&&t.length&&TES.send(n,["fps",e.min(t),e.max(t),Math.round(e.avg(t)),e.median(t),e.majority(t)]),delete d[n],delete o[n]}},TES.scrollFps=function(){r&&t(function(){var n,t=[];TES._fps("scroll",function(e){var i=window.pageYOffset;n&&i===n||(n=i,t.push(e))}),a(function(){t&&t.length>50&&(TES.send("scroll",["fps",e.min(t),e.max(t),Math.round(e.avg(t)),e.median(t),e.majority(t)],!1,!0),t=[])})})}}(),TES.evn=function(){t(function(){var n=function(){return[document.all.length,document.images.length,document.getElementsByTagName("iframe").length,document.documentElement.scrollHeight]};TES.send("onload",["evn"].concat(_toConsumableArray(n()))),a(function(){TES.send("pagehide",["evn"].concat(_toConsumableArray(n())),!1,!0)})})},TES.invalidClick=function(){var n=navigator.userAgent.match(/iPhone OS (\d+_\d+)/);if(!n||"9_3"!==n[1]){var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(e){var t,i;document.addEventListener("touchstart",function(n){t=n.touches[0],i=Date.now()},{"capture":!0,"passive":!0}),document.addEventListener("touchend",function(n){var o=n.changedTouches[0];if(o&&t&&Math.abs(t.pageX-o.pageX)<30&&Math.abs(t.pageY-o.pageY)<30&&Date.now()-i<250){var r,a=n.target,d=new e(function(){clearTimeout(r),d.disconnect()});d.observe(document.documentElement,{"attributes":!0,"childList":!0,"characterData":!0,"subtree":!0}),r=setTimeout(function(){if(d.disconnect(),!function(){var n=a;if("INPUT"===n.nodeName||"SELECT"===n.nodeName||"TEXTAREA"===n.nodeName||"CANVAS"===n.nodeName)return!0;for(var e=function(n){return"A"===n.nodeName&&0===n.href.indexOf("http")};n;){if(e(n))return!0;n=n.parentNode}}()){var n=function(){for(var n=a,e="";n;)e=n.id?"#"+n.id+" "+e:n.className?"."+n.className.split(" ").filter(function(n){return!!n}).join(".")+" "+e:n.nodeName.toLowerCase()+" "+e,n=n.parentNode;return e.replace("#document ","").replace(/\s$/,"")}();TES.record("experience.invalidClick",n,"",{"id":n},!0)}},100)}},{"capture":!0,"passive":!0})}}},Math.random()<.01&&(TES.evn(),TES.scrollFps()),t(function(){isNaN(n)||navigator.userAgent.indexOf("AliApp(")!==-1||TES.send("timing",["perf",performance.timing]),TES.invalidClick()})}(),function(n,e){"function"==typeof define&&define.amd?define("mui/tes/index",[],function(){return n.TES=e()}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():n.TES=e()}(window,function(){return window.TES});